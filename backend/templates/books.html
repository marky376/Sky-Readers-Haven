<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Books - Sky Readers Haven</title>
	<link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
	{% include 'base_nav.html' %}

	<main class="container">
		<section class="catalog-header">
			<h1>Book Catalog</h1>
			<form id="search-form" action="{{ url_for('main.search') }}" method="get" class="search-inline">
				<input name="query" placeholder="Search books by title, author or ISBN" required>
				<button type="submit">Search</button>
			</form>
		</section>

		<section id="catalog" class="grid">
			{% if books %}
				{% for book in books %}
					<article class="card">
						<div class="cover">
							<img src="{{ book.image or url_for('static', filename='images/book.png') }}" alt="{{ book.title }}">
						</div>
						<div class="meta">
							<h3>{{ book.title }}</h3>
							<p class="authors">{{ book.authors | join(', ') if book.authors else 'Unknown' }}</p>
							<p class="desc">{{ (book.description | default('No description available'))[:200] }}{% if book.description and (book.description | length) > 200 %}...{% endif %}</p>
							<div class="actions">
								<span class="published">{{ book.publishedDate or 'N/A' }}</span>
								<a class="btn" href="{{ url_for('main.book_detail', volume_id=book.id) }}">Details</a>
							</div>
						</div>
					</article>
				{% endfor %}
			{% else %}
				<p class="empty">No books to show. Try a search above.</p>
			{% endif %}
		</section>
	</main>

	<script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
